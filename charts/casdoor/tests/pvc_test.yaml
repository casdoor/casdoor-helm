suite: test pvc
templates:
- pvc.yaml

tests:
- it: should not render when persistence is disabled
  set:
    persistence.enabled: false
  asserts:
  - hasDocuments:
      count: 0

- it: should render with default values when persistence is enabled
  set:
    persistence.enabled: true
  asserts:
  - matchSnapshot: {}

- it: should set custom storage class and size
  set:
    persistence.enabled: true
    persistence.storageClass: "fast"
    persistence.size: "10Gi"
  asserts:
  - matchSnapshot: {}
